!function(t,e,i){i.un,i.uns,i.static;var n=i.class,s=(i.getset,i.__newvec,function(){function t(){}return n(t,"PathFinding.core.DiagonalMovement"),t.Always=1,t.Never=2,t.IfAtMostOneObstacle=3,t.OnlyWhenNoObstacles=4,t}()),a=(function(){function t(t,e,i){this.width=0,this.height=0,this.nodes=null;var n=0;"number"==typeof t?n=t:(e=t.length,n=t[0].length,i=t),this.width=n,this.height=e,this.nodes=this._buildNodes(n,e,i)}n(t,"PathFinding.core.Grid");var e=t.prototype;e._buildNodes=function(t,e,i){var n=0,s=0,a=[];for(n=0;n<e;++n)for(a[n]=[],s=0;s<t;++s)a[n][s]=new r(s,n);if(null==i)return a;if(i.length!=e||i[0].length!=t)throw new Error("Matrix size does not fit");for(n=0;n<e;++n)for(s=0;s<t;++s)i[n][s]&&(a[n][s].walkable=!1);return a},e.getNodeAt=function(t,e){return this.nodes[e][t]},e.isWalkableAt=function(t,e){return this.isInside(t,e)&&this.nodes[e][t].walkable},e.isInside=function(t,e){return t>=0&&t<this.width&&e>=0&&e<this.height},e.setWalkableAt=function(t,e,i){this.nodes[e][t].walkable=i},e.getNeighbors=function(t,e){var i=t.x,n=t.y,a=[],r=!1,o=!1,h=!1,l=!1,u=!1,f=!1,d=!1,c=!1,p=this.nodes;if(this.isWalkableAt(i,n-1)&&(a.push(p[n-1][i]),r=!0),this.isWalkableAt(i+1,n)&&(a.push(p[n][i+1]),h=!0),this.isWalkableAt(i,n+1)&&(a.push(p[n+1][i]),u=!0),this.isWalkableAt(i-1,n)&&(a.push(p[n][i-1]),d=!0),e==s.Never)return a;if(e==s.OnlyWhenNoObstacles)o=d&&r,l=r&&h,f=h&&u,c=u&&d;else if(e==s.IfAtMostOneObstacle)o=d||r,l=r||h,f=h||u,c=u||d;else{if(e!=s.Always)throw new Error("Incorrect value of diagonalMovement");o=!0,l=!0,f=!0,c=!0}return o&&this.isWalkableAt(i-1,n-1)&&a.push(p[n-1][i-1]),l&&this.isWalkableAt(i+1,n-1)&&a.push(p[n-1][i+1]),f&&this.isWalkableAt(i+1,n+1)&&a.push(p[n+1][i+1]),c&&this.isWalkableAt(i-1,n+1)&&a.push(p[n+1][i-1]),a},e.clone=function(){var e=0,i=0,n=this.width,s=this.height,a=this.nodes,o=new t(n,s),h=[];for(e=0;e<s;++e)for(h[e]=[],i=0;i<n;++i)h[e][i]=new r(i,e,a[e][i].walkable);return o.nodes=h,o},e.reset=function(){for(var t,e=0;e<this.height;++e)for(var i=0;i<this.width;++i)(t=this.nodes[e][i]).g=0,t.f=0,t.h=0,t.by=0,t.parent=null,t.opened=null,t.closed=null,t.tested=null},t.createGridFromAStarMap=function(e){for(var i=e.width,n=e.height,s=e.getPixels(),a=[],r=0,o=0;o<i;o++)for(var h=a[o]=[],l=0;l<n;l++){var u=s[r++],f=s[r++],d=s[r++],c=s[r++];h[l]=255==u&&255==f&&255==d&&255==c?1:0}return new t(i,n,a)}}(),function(){function t(){}return n(t,"PathFinding.core.Heuristic"),t.manhattan=function(t,e){return t+e},t.euclidean=function(t,e){return Math.sqrt(t*t+e*e)},t.octile=function(t,e){var i=Math.SQRT2-1;return t<e?i*t+e:i*e+t},t.chebyshev=function(t,e){return Math.max(t,e)},t}()),r=function(){function t(t,e,i){this.x=0,this.y=0,this.g=0,this.f=0,this.h=0,this.by=0,this.parent=null,this.opened=null,this.closed=null,this.tested=null,this.retainCount=null,this.walkable=!1,void 0===i&&(i=!0),this.x=t,this.y=e,this.walkable=i}return n(t,"PathFinding.core.Node",null,"Node$1"),t}(),o=function(){function t(){}return n(t,"PathFinding.core.Util"),t.backtrace=function(t){for(var e=[[t.x,t.y]];t.parent;)t=t.parent,e.push([t.x,t.y]);return e.reverse()},t.biBacktrace=function(e,i){var n=t.backtrace(e),s=t.backtrace(i);return n.concat(s.reverse())},t.pathLength=function(t){var e=0,i=0,n=0,s=0,a=0,r=0;for(e=1;e<t.length;++e)n=t[e-1],s=t[e],a=n[0]-s[0],r=n[1]-s[1],i+=Math.sqrt(a*a+r*r);return i},t.interpolate=function(t,e,i,n){var s=Math.abs,a=[],r=0,o=0,h=0,l=0,u=0,f=0;for(h=s(i-t),l=s(n-e),r=t<i?1:-1,o=e<n?1:-1,u=h-l;;){if(a.push([t,e]),t==i&&e==n)break;(f=2*u)>-l&&(u-=l,t+=r),f<h&&(u+=h,e+=o)}return a},t.expandPath=function(e){var i,n,s,a=[],r=e.length,o=0,h=0,l=0;if(r<2)return a;for(h=0;h<r-1;++h)for(i=e[h],n=e[h+1],o=(s=t.interpolate(i[0],i[1],n[0],n[1])).length,l=0;l<o-1;++l)a.push(s[l]);return a.push(e[r-1]),a},t.smoothenPath=function(e,i){var n,s,a,r,o,h=i.length,l=i[0][0],u=i[0][1],f=i[h-1][0],d=i[h-1][1],c=0,p=0,g=0,b=0,m=0,v=0,A=!1;for(n=[[c=l,p=u]],m=2;m<h;++m){for(g=(s=i[m])[0],b=s[1],a=t.interpolate(c,p,g,b),A=!1,v=1;v<a.length;++v)if(r=a[v],!e.isWalkableAt(r[0],r[1])){A=!0;break}A&&(o=i[m-1],n.push(o),c=o[0],p=o[1])}return n.push([f,d]),n},t.compressPath=function(t){if(t.length<3)return t;var e=[],i=t[0][0],n=t[0][1],s=t[1][0],a=t[1][1],r=s-i,o=a-n,h=0,l=0,u=0,f=0,d=NaN,c=0;for(r/=d=Math.sqrt(r*r+o*o),o/=d,e.push([i,n]),c=2;c<t.length;c++)h=s,l=a,u=r,f=o,r=(s=t[c][0])-h,o=(a=t[c][1])-l,o/=d=Math.sqrt(r*r+o*o),(r/=d)===u&&o===f||e.push([h,l]);return e.push([s,a]),e},t}(),h=function(){function t(t){this.allowDiagonal=!1,this.dontCrossCorners=!1,this.heuristic=null,this.weight=0,this.diagonalMovement=0,t=t||{},this.allowDiagonal=t.allowDiagonal,this.dontCrossCorners=t.dontCrossCorners,this.heuristic=t.heuristic||a.manhattan,this.weight=t.weight||1,this.diagonalMovement=t.diagonalMovement,this.diagonalMovement||(this.allowDiagonal?this.dontCrossCorners?this.diagonalMovement=s.OnlyWhenNoObstacles:this.diagonalMovement=s.IfAtMostOneObstacle:this.diagonalMovement=s.Never),this.diagonalMovement===s.Never?this.heuristic=t.heuristic||a.manhattan:this.heuristic=t.heuristic||a.octile}n(t,"PathFinding.finders.AStarFinder");return t.prototype.findPath=function(t,e,i,n,s){var a,r,h,l=new f(function(t,e){return t.f-e.f}),u=s.getNodeAt(t,e),d=s.getNodeAt(i,n),c=this.heuristic,p=this.diagonalMovement,g=this.weight,b=Math.abs,m=Math.SQRT2,v=0,A=0,k=0,W=0,M=0;for(u.g=0,u.f=0,l.push(u),u.opened=!0;!l.empty();){if(a=l.pop(),a.closed=!0,a===d)return o.backtrace(d);for(v=0,A=(r=s.getNeighbors(a,p)).length;v<A;++v)(h=r[v]).closed||(k=h.x,W=h.y,M=a.g+(k-a.x==0||W-a.y==0?1:m),(!h.opened||M<h.g)&&(h.g=M,h.h=h.h||g*c(b(k-i),b(W-n)),h.f=h.g+h.h,h.parent=a,h.opened?l.updateItem(h):(l.push(h),h.opened=!0)))}return[]},t}(),l=function(){function t(t){this.allowDiagonal=!1,this.dontCrossCorners=!1,this.diagonalMovement=0,this.heuristic=null,this.weight=0,t=t||{},this.allowDiagonal=t.allowDiagonal,this.dontCrossCorners=t.dontCrossCorners,this.diagonalMovement=t.diagonalMovement,this.heuristic=t.heuristic||a.manhattan,this.weight=t.weight||1,this.diagonalMovement||(this.allowDiagonal?this.dontCrossCorners?this.diagonalMovement=s.OnlyWhenNoObstacles:this.diagonalMovement=s.IfAtMostOneObstacle:this.diagonalMovement=s.Never),this.diagonalMovement==s.Never?this.heuristic=t.heuristic||a.manhattan:this.heuristic=t.heuristic||a.octile}n(t,"PathFinding.finders.BiAStarFinder");return t.prototype.findPath=function(t,e,i,n,s){var a,r,h,l=function(t,e){return t.f-e.f},u=new f(l),d=new f(l),c=s.getNodeAt(t,e),p=s.getNodeAt(i,n),g=this.heuristic,b=this.diagonalMovement,m=this.weight,v=Math.abs,A=Math.SQRT2,k=0,W=0,M=0,y=0,N=0;for(c.g=0,c.f=0,u.push(c),c.opened=1,p.g=0,p.f=0,d.push(p),p.opened=2;!u.empty()&&!d.empty();){for((a=u.pop()).closed=!0,k=0,W=(r=s.getNeighbors(a,b)).length;k<W;++k)if(!(h=r[k]).closed){if(2===h.opened)return o.biBacktrace(a,h);M=h.x,y=h.y,N=a.g+(M-a.x==0||y-a.y==0?1:A),(!h.opened||N<h.g)&&(h.g=N,h.h=h.h||m*g(v(M-i),v(y-n)),h.f=h.g+h.h,h.parent=a,h.opened?u.updateItem(h):(u.push(h),h.opened=1))}for((a=d.pop()).closed=!0,k=0,W=(r=s.getNeighbors(a,b)).length;k<W;++k)if(!(h=r[k]).closed){if(1===h.opened)return o.biBacktrace(h,a);M=h.x,y=h.y,N=a.g+(M-a.x==0||y-a.y==0?1:A),(!h.opened||N<h.g)&&(h.g=N,h.h=h.h||m*g(v(M-t),v(y-e)),h.f=h.g+h.h,h.parent=a,h.opened?d.updateItem(h):(d.push(h),h.opened=2))}}return[]},t}(),u=(function(){function t(t){this.allowDiagonal=!1,this.dontCrossCorners=!1,this.heuristic=null,this.weight=0,this.diagonalMovement=0,t=t||{},this.allowDiagonal=t.allowDiagonal,this.dontCrossCorners=t.dontCrossCorners,this.diagonalMovement=t.diagonalMovement,this.diagonalMovement||(this.allowDiagonal?this.dontCrossCorners?this.diagonalMovement=s.OnlyWhenNoObstacles:this.diagonalMovement=s.IfAtMostOneObstacle:this.diagonalMovement=s.Never)}n(t,"PathFinding.finders.BiBreadthFirstFinder");t.prototype.findPath=function(t,e,i,n,s){var a,r,h,l=s.getNodeAt(t,e),u=s.getNodeAt(i,n),f=[],d=[],c=this.diagonalMovement,p=0,g=0;for(f.push(l),l.opened=!0,l.by=0,d.push(u),u.opened=!0,u.by=1;f.length&&d.length;){for((h=f.shift()).closed=!0,p=0,g=(a=s.getNeighbors(h,c)).length;p<g;++p)if(!(r=a[p]).closed)if(r.opened){if(1===r.by)return o.biBacktrace(h,r)}else f.push(r),r.parent=h,r.opened=!0,r.by=0;for((h=d.shift()).closed=!0,p=0,g=(a=s.getNeighbors(h,c)).length;p<g;++p)if(!(r=a[p]).closed)if(r.opened){if(0===r.by)return o.biBacktrace(r,h)}else d.push(r),r.parent=h,r.opened=!0,r.by=1}return[]}}(),function(){function t(t){this.allowDiagonal=!1,this.dontCrossCorners=!1,this.heuristic=null,this.weight=0,this.diagonalMovement=0,t=t||{},this.allowDiagonal=t.allowDiagonal,this.dontCrossCorners=t.dontCrossCorners,this.diagonalMovement=t.diagonalMovement,this.diagonalMovement||(this.allowDiagonal?this.dontCrossCorners?this.diagonalMovement=s.OnlyWhenNoObstacles:this.diagonalMovement=s.IfAtMostOneObstacle:this.diagonalMovement=s.Never)}n(t,"PathFinding.finders.BreadthFirstFinder");t.prototype.findPath=function(t,e,i,n,s){var a,r,h,l=[],u=this.diagonalMovement,f=s.getNodeAt(t,e),d=s.getNodeAt(i,n),c=0,p=0;for(l.push(f),f.opened=!0;l.length;){if(h=l.shift(),h.closed=!0,h===d)return o.backtrace(d);for(c=0,p=(a=s.getNeighbors(h,u)).length;c<p;++c)(r=a[c]).closed||r.opened||(l.push(r),r.opened=!0,r.parent=h)}return[]}}(),function(){function t(t){this.allowDiagonal=!1,this.dontCrossCorners=!1,this.heuristic=null,this.weight=0,this.diagonalMovement=0,this.trackRecursion=!1,this.timeLimit=NaN,t=t||{},this.allowDiagonal=t.allowDiagonal,this.dontCrossCorners=t.dontCrossCorners,this.diagonalMovement=t.diagonalMovement,this.heuristic=t.heuristic||a.manhattan,this.weight=t.weight||1,this.trackRecursion=t.trackRecursion||!1,this.timeLimit=t.timeLimit||1/0,this.diagonalMovement||(this.allowDiagonal?this.dontCrossCorners?this.diagonalMovement=s.OnlyWhenNoObstacles:this.diagonalMovement=s.IfAtMostOneObstacle:this.diagonalMovement=s.Never),this.diagonalMovement===s.Never?this.heuristic=t.heuristic||a.manhattan:this.heuristic=t.heuristic||a.octile}n(t,"PathFinding.finders.IDAStarFinder");t.prototype.findPath=function(t,e,i,n,s){var a,r=this,o=0,h=(new Date).getTime(),l=function(t,e){return r.heuristic(Math.abs(e.x-t.x),Math.abs(e.y-t.y))},u=function(t,e,i,n,a){if(o++,r.timeLimit>0&&(new Date).getTime()-h>1e3*r.timeLimit)return 1/0;var f=e+l(t,d)*r.weight;if(f>i)return f;if(t==d)return n[a]=[t.x,t.y],t;var c,p=0,g=0,b=0,m=s.getNeighbors(t,r.diagonalMovement);for(b=0,p=1/0;c=m[b];++b){if(r.trackRecursion&&(c.retainCount=c.retainCount+1||1,1!=c.tested&&(c.tested=!0)),(g=u(c,e+function(t,e){return t.x===e.x||t.y===e.y?1:Math.SQRT2}(t,c),i,n,a+1))instanceof PathFinding.core.Node)return n[a]=[t.x,t.y],g;r.trackRecursion&&0==--c.retainCount&&(c.tested=!1),g<p&&(p=g)}return p},f=s.getNodeAt(t,e),d=s.getNodeAt(i,n),c=l(f,d),p=0,g=0;for(p=0;!0;++p){if(a=[],(g=u(f,0,c,a,0))==1/0){a=[];break}if(g instanceof PathFinding.core.Node)break;c=g}return a}}(),function(){function t(t){this.grid=null,this.openList=null,this.startNode=null,this.endNode=null,this.heuristic=null,this.trackJumpRecursion=!1,t=t||{},this.heuristic=t.heuristic||a.manhattan,this.trackJumpRecursion=t.trackJumpRecursion||!1}n(t,"PathFinding.finders.JumpPointFinderBase");var e=t.prototype;return e.findPath=function(t,e,i,n,s){var a,r=this.openList=new f(function(t,e){return t.f-e.f}),h=this.startNode=s.getNodeAt(t,e),l=this.endNode=s.getNodeAt(i,n);for(this.grid=s,h.g=0,h.f=0,r.push(h),h.opened=!0;!r.empty();){if(a=r.pop(),a.closed=!0,a==l)return o.expandPath(o.backtrace(l));this._identifySuccessors(a)}return[]},e._identifySuccessors=function(t){var e,i,n,s,r=this.grid,o=this.heuristic,h=this.openList,l=this.endNode.x,u=this.endNode.y,f=0,d=0,c=t.x,p=t.y,g=0,b=0,m=0,v=0,A=Math.abs;Math.max;for(f=0,d=(e=this._findNeighbors(t)).length;f<d;++f)if(i=e[f],n=this._jump(i[0],i[1],c,p)){if(g=n[0],b=n[1],(s=r.getNodeAt(g,b)).closed)continue;m=a.octile(A(g-c),A(b-p)),v=t.g+m,(!s.opened||v<s.g)&&(s.g=v,s.h=s.h||o(A(g-l),A(b-u)),s.f=s.g+s.h,s.parent=t,s.opened?h.updateItem(s):(h.push(s),s.opened=!0))}},e._jump=function(t,e,i,n){return[]},e._findNeighbors=function(t){return[]},t}()),f=(function(){function t(t){}n(t,"PathFinding.finders.JumpPointFinder")}(),function(){function t(t){this.allowDiagonal=!1,this.dontCrossCorners=!1,this.diagonalMovement=0,this.heuristic=null,t=t||{},this.allowDiagonal=t.allowDiagonal,this.dontCrossCorners=t.dontCrossCorners,this.heuristic=t.heuristic||a.manhattan,this.diagonalMovement=t.diagonalMovement,this.diagonalMovement||(this.allowDiagonal?this.dontCrossCorners?this.diagonalMovement=s.OnlyWhenNoObstacles:this.diagonalMovement=s.IfAtMostOneObstacle:this.diagonalMovement=s.Never),this.diagonalMovement==s.Never?this.heuristic=t.heuristic||a.manhattan:this.heuristic=t.heuristic||a.octile}n(t,"PathFinding.finders.TraceFinder");t.prototype.findPath=function(t,e,i,n,s){var a,r,h,l=new f(function(t,e){return t.f-e.f}),u=s.getNodeAt(t,e),d=s.getNodeAt(i,n),c=this.heuristic,p=(this.allowDiagonal,this.dontCrossCorners,Math.abs),g=Math.SQRT2,b=0,m=0,v=0,A=0,k=0;for(u.g=0,u.f=0,l.push(u),u.opened=!0;!l.empty();){if(a=l.pop(),a.closed=!0,a===d)return o.backtrace(d);for(b=0,m=(r=s.getNeighbors(a,this.diagonalMovement)).length;b<m;++b)(h=r[b]).closed||(v=h.x,A=h.y,k=a.g+(v-a.x==0||A-a.y==0?1:g),(!h.opened||k<h.g)&&(h.g=k*m/9,h.h=h.h||c(p(v-i),p(A-n)),h.f=h.g+h.h,h.parent=a,h.opened?l.updateItem(h):(l.push(h),h.opened=!0)))}return[]}}(),function(){function t(t){this.cmp=null,this.nodes=null,this.heapFunction=new d,this.cmp=null!=t?t:this.heapFunction.defaultCmp,this.nodes=[]}n(t,"PathFinding.libs.Heap");var e=t.prototype;return e.push=function(t){return this.heapFunction.heappush(this.nodes,t,this.cmp)},e.pop=function(){return this.heapFunction.heappop(this.nodes,this.cmp)},e.peek=function(){return this.nodes[0]},e.contains=function(t){return-1!==this.nodes.indexOf(t)},e.replace=function(t){return this.heapFunction.heapreplace(this.nodes,t,this.cmp)},e.pushpop=function(t){return this.heapFunction.heappushpop(this.nodes,t,this.cmp)},e.heapify=function(){return this.heapFunction.heapify(this.nodes,this.cmp)},e.updateItem=function(t){return this.heapFunction.updateItem(this.nodes,t,this.cmp)},e.clear=function(){return this.nodes=[]},e.empty=function(){return 0===this.nodes.length},e.size=function(){return this.nodes.length},e.clone=function(){var e=new t;return e.nodes=this.nodes.slice(0),e},e.toArray=function(){return this.nodes.slice(0)},t}()),d=function(){function t(){this.defaultCmp=function(t,e){return t<e?-1:t>e?1:0}}n(t,"PathFinding.libs.HeapFunction");var e=t.prototype;return e.insort=function(t,e,i,n,s){var a=NaN;if(null==i&&(i=0),null==s&&(s=this.defaultCmp),i<0)throw new Error("lo must be non-negative");for(null==n&&(n=t.length);i<n;)s(e,t[a=Math.floor((i+n)/2)])<0?n=a:i=a+1;return[].splice.apply(t,[i,i-i].concat(e)),e},e.heappush=function(t,e,i){return null==i&&(i=this.defaultCmp),t.push(e),this._siftdown(t,0,t.length-1,i)},e.heappop=function(t,e){var i,n;return null==e&&(e=this.defaultCmp),i=t.pop(),t.length?(n=t[0],t[0]=i,this._siftup(t,0,e)):n=i,n},e.heapreplace=function(t,e,i){var n;return null==i&&(i=this.defaultCmp),n=t[0],t[0]=e,this._siftup(t,0,i),n},e.heappushpop=function(t,e,i){var n;return null==i&&(i=this.defaultCmp),t.length&&i(t[0],e)<0&&(e=(n=[t[0],e])[0],t[0]=n[1],this._siftup(t,0,i)),e},e.heapify=function(t,e){var i,n,s,a,r=0,o=0,h=0,l=0;for(null==e&&(e=this.defaultCmp),s=[],o=0,l=(n=function(){for(a=[],h=0,i=Math.floor(t.length/2);0<=i?h<i:h>i;0<=i?h++:h--)a.push(h);return a}.apply(this).reverse()).length;o<l;o++)r=n[o],s.push(this._siftup(t,r,e));return s},e.updateItem=function(t,e,i){var n=0;return null==i&&(i=this.defaultCmp),-1===(n=t.indexOf(e))?null:(this._siftdown(t,0,n,i),this._siftup(t,n,i))},e.nlargest=function(t,e,i){var n,s,a,r=0,o=0;if(null==i&&(i=this.defaultCmp),!(s=t.slice(0,e)).length)return s;for(this.heapify(s,i),r=0,o=(a=t.slice(e)).length;r<o;r++)n=a[r],this.heappushpop(s,n,i);return s.sort(i).reverse()},e.nsmallest=function(t,e,i){var n,s,a,r,o,h,l,u=0,f=0;if(null==i&&(i=this.defaultCmp),10*e<=t.length){if(!(a=t.slice(0,e).sort(i)).length)return a;for(s=a[a.length-1],u=0,r=(o=t.slice(e)).length;u<r;u++)i(n=o[u],s)<0&&(this.insort(a,n,0,null,i),a.pop(),s=a[a.length-1]);return a}for(this.heapify(t,i),l=[],f=0,h=Math.min(e,t.length);0<=h?f<h:f>h;0<=h?++f:--f)l.push(this.heappop(t,i));return l},e._siftdown=function(t,e,i,n){var s,a,r=0;for(null==n&&(n=this.defaultCmp),s=t[i];i>e&&n(s,a=t[r=i-1>>1])<0;)t[i]=a,i=r;return t[i]=s},e._siftup=function(t,e,i){var n,s=0,a=0,r=0,o=0;for(null==i&&(i=this.defaultCmp),a=t.length,o=e,n=t[e],s=2*e+1;s<a;)(r=s+1)<a&&!(i(t[s],t[r])<0)&&(s=r),t[e]=t[s],s=2*(e=s)+1;return t[e]=n,this._siftdown(t,o,e,i)},t}();(function(t){function e(t){e.__super.call(this,t);var i=this.heuristic;this.heuristic=function(t,e){return 1e6*i(t,e)}}n(e,"PathFinding.finders.BestFirstFinder",h)})(),function(t){function e(t){e.__super.call(this,t);var i=this.heuristic;this.heuristic=function(t,e){return 1e6*i(t,e)}}n(e,"PathFinding.finders.BiBestFirstFinder",l)}(),function(t){function e(t){e.__super.call(this,t),this.heuristic=function(t,e){return 0}}n(e,"PathFinding.finders.BiDijkstraFinder",l)}(),function(t){function e(t){e.__super.call(this,t),this.heuristic=function(t,e){return 0}}n(e,"PathFinding.finders.DijkstraFinder",h)}(),function(t){function e(t){e.__super.call(this,t)}n(e,"PathFinding.finders.JPFAlwaysMoveDiagonally",u);var i=e.prototype;i._jump=function(t,e,i,n){var s=this.grid,a=t-i,r=e-n;if(!s.isWalkableAt(t,e))return null;if(1==this.trackJumpRecursion&&(s.getNodeAt(t,e).tested=!0),s.getNodeAt(t,e)==this.endNode)return[t,e];if(0!==a&&0!==r){if(s.isWalkableAt(t-a,e+r)&&!s.isWalkableAt(t-a,e)||s.isWalkableAt(t+a,e-r)&&!s.isWalkableAt(t,e-r))return[t,e];if(this._jump(t+a,e,t,e)||this._jump(t,e+r,t,e))return[t,e]}else if(0!==a){if(s.isWalkableAt(t+a,e+1)&&!s.isWalkableAt(t,e+1)||s.isWalkableAt(t+a,e-1)&&!s.isWalkableAt(t,e-1))return[t,e]}else if(s.isWalkableAt(t+1,e+r)&&!s.isWalkableAt(t+1,e)||s.isWalkableAt(t-1,e+r)&&!s.isWalkableAt(t-1,e))return[t,e];return this._jump(t+a,e+r,t,e)},i._findNeighbors=function(t){var e,i,n=t.parent,a=t.x,r=t.y,o=this.grid,h=0,l=0,u=0,f=0,d=[],c=0,p=0;if(n)h=n.x,l=n.y,u=(a-h)/Math.max(Math.abs(a-h),1),f=(r-l)/Math.max(Math.abs(r-l),1),0!==u&&0!==f?(o.isWalkableAt(a,r+f)&&d.push([a,r+f]),o.isWalkableAt(a+u,r)&&d.push([a+u,r]),o.isWalkableAt(a+u,r+f)&&d.push([a+u,r+f]),o.isWalkableAt(a-u,r)||d.push([a-u,r+f]),o.isWalkableAt(a,r-f)||d.push([a+u,r-f])):0===u?(o.isWalkableAt(a,r+f)&&d.push([a,r+f]),o.isWalkableAt(a+1,r)||d.push([a+1,r+f]),o.isWalkableAt(a-1,r)||d.push([a-1,r+f])):(o.isWalkableAt(a+u,r)&&d.push([a+u,r]),o.isWalkableAt(a,r+1)||d.push([a+u,r+1]),o.isWalkableAt(a,r-1)||d.push([a+u,r-1]));else for(c=0,p=(e=o.getNeighbors(t,s.Always)).length;c<p;++c)i=e[c],d.push([i.x,i.y]);return d}}(),function(t){function e(t){e.__super.call(this,t)}n(e,"PathFinding.finders.JPFMoveDiagonallyIfAtMostOneObstacle",u);var i=e.prototype;i._jump=function(t,e,i,n){var s=this.grid,a=t-i,r=e-n;if(!s.isWalkableAt(t,e))return null;if(!0===this.trackJumpRecursion&&(s.getNodeAt(t,e).tested=!0),s.getNodeAt(t,e)==this.endNode)return[t,e];if(0!==a&&0!==r){if(s.isWalkableAt(t-a,e+r)&&!s.isWalkableAt(t-a,e)||s.isWalkableAt(t+a,e-r)&&!s.isWalkableAt(t,e-r))return[t,e];if(this._jump(t+a,e,t,e)||this._jump(t,e+r,t,e))return[t,e]}else if(0!==a){if(s.isWalkableAt(t+a,e+1)&&!s.isWalkableAt(t,e+1)||s.isWalkableAt(t+a,e-1)&&!s.isWalkableAt(t,e-1))return[t,e]}else if(s.isWalkableAt(t+1,e+r)&&!s.isWalkableAt(t+1,e)||s.isWalkableAt(t-1,e+r)&&!s.isWalkableAt(t-1,e))return[t,e];return s.isWalkableAt(t+a,e)||s.isWalkableAt(t,e+r)?this._jump(t+a,e+r,t,e):null},i._findNeighbors=function(t){var e,i,n=t.parent,a=t.x,r=t.y,o=this.grid,h=0,l=0,u=0,f=0,d=[],c=0,p=0;if(n)h=n.x,l=n.y,u=(a-h)/Math.max(Math.abs(a-h),1),f=(r-l)/Math.max(Math.abs(r-l),1),0!==u&&0!==f?(o.isWalkableAt(a,r+f)&&d.push([a,r+f]),o.isWalkableAt(a+u,r)&&d.push([a+u,r]),(o.isWalkableAt(a,r+f)||o.isWalkableAt(a+u,r))&&d.push([a+u,r+f]),!o.isWalkableAt(a-u,r)&&o.isWalkableAt(a,r+f)&&d.push([a-u,r+f]),!o.isWalkableAt(a,r-f)&&o.isWalkableAt(a+u,r)&&d.push([a+u,r-f])):0===u?o.isWalkableAt(a,r+f)&&(d.push([a,r+f]),o.isWalkableAt(a+1,r)||d.push([a+1,r+f]),o.isWalkableAt(a-1,r)||d.push([a-1,r+f])):o.isWalkableAt(a+u,r)&&(d.push([a+u,r]),o.isWalkableAt(a,r+1)||d.push([a+u,r+1]),o.isWalkableAt(a,r-1)||d.push([a+u,r-1]));else for(c=0,p=(e=o.getNeighbors(t,s.IfAtMostOneObstacle)).length;c<p;++c)i=e[c],d.push([i.x,i.y]);return d}}(),function(t){function e(t){e.__super.call(this,t)}n(e,"PathFinding.finders.JPFMoveDiagonallyIfNoObstacles",u);var i=e.prototype;i._jump=function(t,e,i,n){var s=this.grid,a=t-i,r=e-n;if(!s.isWalkableAt(t,e))return null;if(!0===this.trackJumpRecursion&&(s.getNodeAt(t,e).tested=!0),s.getNodeAt(t,e)===this.endNode)return[t,e];if(0!==a&&0!==r){if(this._jump(t+a,e,t,e)||this._jump(t,e+r,t,e))return[t,e]}else if(0!==a){if(s.isWalkableAt(t,e-1)&&!s.isWalkableAt(t-a,e-1)||s.isWalkableAt(t,e+1)&&!s.isWalkableAt(t-a,e+1))return[t,e]}else if(0!==r&&(s.isWalkableAt(t-1,e)&&!s.isWalkableAt(t-1,e-r)||s.isWalkableAt(t+1,e)&&!s.isWalkableAt(t+1,e-r)))return[t,e];return s.isWalkableAt(t+a,e)&&s.isWalkableAt(t,e+r)?this._jump(t+a,e+r,t,e):null},i._findNeighbors=function(t){var e,i,n=t.parent,a=t.x,r=t.y,o=this.grid,h=0,l=0,u=0,f=0,d=[],c=0,p=0;if(n)if(h=n.x,l=n.y,u=(a-h)/Math.max(Math.abs(a-h),1),f=(r-l)/Math.max(Math.abs(r-l),1),0!==u&&0!==f)o.isWalkableAt(a,r+f)&&d.push([a,r+f]),o.isWalkableAt(a+u,r)&&d.push([a+u,r]),o.isWalkableAt(a,r+f)&&o.isWalkableAt(a+u,r)&&d.push([a+u,r+f]);else{var g=!1;if(0!==u){g=o.isWalkableAt(a+u,r);var b=o.isWalkableAt(a,r+1),m=o.isWalkableAt(a,r-1);g&&(d.push([a+u,r]),b&&d.push([a+u,r+1]),m&&d.push([a+u,r-1])),b&&d.push([a,r+1]),m&&d.push([a,r-1])}else if(0!==f){g=o.isWalkableAt(a,r+f);var v=o.isWalkableAt(a+1,r),A=o.isWalkableAt(a-1,r);g&&(d.push([a,r+f]),v&&d.push([a+1,r+f]),A&&d.push([a-1,r+f])),v&&d.push([a+1,r]),A&&d.push([a-1,r])}}else for(c=0,p=(e=o.getNeighbors(t,s.OnlyWhenNoObstacles)).length;c<p;++c)i=e[c],d.push([i.x,i.y]);return d}}(),function(t){function e(t){e.__super.call(this,t)}n(e,"PathFinding.finders.JPFNeverMoveDiagonally",u);var i=e.prototype;i._jump=function(t,e,i,n){var s=this.grid,a=t-i,r=e-n;if(!s.isWalkableAt(t,e))return null;if(!0===this.trackJumpRecursion&&(s.getNodeAt(t,e).tested=!0),s.getNodeAt(t,e)==this.endNode)return[t,e];if(0!==a){if(s.isWalkableAt(t,e-1)&&!s.isWalkableAt(t-a,e-1)||s.isWalkableAt(t,e+1)&&!s.isWalkableAt(t-a,e+1))return[t,e]}else{if(0===r)throw new Error("Only horizontal and vertical movements are allowed");if(s.isWalkableAt(t-1,e)&&!s.isWalkableAt(t-1,e-r)||s.isWalkableAt(t+1,e)&&!s.isWalkableAt(t+1,e-r))return[t,e];if(this._jump(t+1,e,t,e)||this._jump(t-1,e,t,e))return[t,e]}return this._jump(t+a,e+r,t,e)},i._findNeighbors=function(t){var e,i,n=t.parent,a=t.x,r=t.y,o=this.grid,h=0,l=0,u=0,f=0,d=[],c=0,p=0;if(n)h=n.x,l=n.y,u=(a-h)/Math.max(Math.abs(a-h),1),f=(r-l)/Math.max(Math.abs(r-l),1),0!==u?(o.isWalkableAt(a,r-1)&&d.push([a,r-1]),o.isWalkableAt(a,r+1)&&d.push([a,r+1]),o.isWalkableAt(a+u,r)&&d.push([a+u,r])):0!==f&&(o.isWalkableAt(a-1,r)&&d.push([a-1,r]),o.isWalkableAt(a+1,r)&&d.push([a+1,r]),o.isWalkableAt(a,r+f)&&d.push([a,r+f]));else for(c=0,p=(e=o.getNeighbors(t,s.Never)).length;c<p;++c)i=e[c],d.push([i.x,i.y]);return d}}()}(window,document,Laya),"function"==typeof define&&define.amd&&define("laya.core",["require","exports"],function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});for(var i in Laya){var n=Laya[i];n&&n.__isclass&&(e[i]=n)}});